<!DOCTYPE html>
<html lang="en">
<head>
	<title>Topia Interface Test</title>
	<meta charset="utf-8">
	<link href="normalize.css" rel="stylesheet" media="screen">
	<style>
		/* general */
		body{
			background-color: rgb(22, 24, 28);
		}
		input, button{
			margin: 5px;
    		padding: 1px 2px;
			border-width: 1px;
			border-style: solid;
			border-color: rgb(80,80,80);
			border-radius: 4px;
			background-color: rgb(53,52,47);
    		color: rgb(255,255,255);
		}
		.topiagamewindow{
			width: 960px;
			height: 708px;
			margin: 10px auto;
			position: relative;
			border-width: 6px;
			border-style: solid;
			border-color: rgb(90,90,90);
			border-radius: 15px;
			background-color: rgb(0,0,0);
			background-image: url("grass.png");
		}
		.left{
			float: left;
		}
		.right{
			float: right;
		}
		/* Chat */
		#window{
			width: 350px;
			bottom: 5px;
			left: 5px;
			position: absolute;
			font-family: Verdana, sans-serif;
			font-size: 11px;
			color: rgb(255,255,255);
			border-width: 1px;
			border-style: solid;
			border-color: rgb(80,80,80);
			border-radius: 8px;
			background-color: rgb(53,52,47);
			overflow: hidden;
	        box-shadow: -1px 1px 4px 0px rgb(0,0,0);
		}
		#textinput{
			margin-top: 0px;
			width: 275px;
    		box-shadow: inset 0px 0px 4px 0px rgb(0,0,0);
		}
		#textinput:focus{
			border-color: rgba(255,165,0,0.6);
			box-shadow: 0px 0px 0px 1px rgba(255,165,0,0.7);
		}
		#submit{
			margin-top: 0px;
			width: 45px;
    		box-shadow: -1px 1px 1px 0px rgb(0,0,0);
    		cursor: pointer;
		}
		#submit:active{
			box-shadow: inset -1px 1px 2px 0px rgb(0,0,0);
		}
		#menu{

		}
		.log{
			height: 160px;
			width: 338px;
			margin: 5px;
			border-radius: 4px;
			border-style: solid;
			border-color: rgb(80,80,80);
			border-width: 1px;
			overflow-x: hidden;
			overflow-y: hidden;
			word-wrap: break-word;
			box-shadow: inset 0px 0px 4px 0px rgb(0,0,0);
		}
		.message{
			padding: 1px;
		}
		.settingsbutton{
    		box-shadow: -1px 1px 1px 0px rgb(0,0,0);
    		cursor: pointer;
    		overflow: hidden;
		}
		.settingsbutton:active{
			box-shadow: inset -1px 1px 2px 0px rgb(0,0,0);
		}
	</style>
</head>
<body>
	<div class="topiagamewindow">
		<div id="window">
			<div id="menu">
				<button class="settingsbutton left">Settings</button>
				<button class="settingsbutton right" data-bind="click: chatToggle">
					<image src="minus.png" alt="" data-bind="visible: chatShow">
					<image src="plus.png" alt="" data-bind="visible: chatHide">
				</button>
				<button class="settingsbutton right">
					<image src="arrowdown.png" alt="">
				</button>
				<button class="settingsbutton right">
					<image src="arrowup.png" alt="">
				</button>
			</div>
			<div id="chatLog1" class="log" data-bind="foreach: chatLog, visible: chatShow">
				<div class="message">
					<span data-bind="text: timestamp"></span>
					<span data-bind="text: name" style="font-weight: bold;"></span>
					<span data-bind="text: text"></span>
				</div>
			</div>
			<div>
				<form data-bind="submit: chatSubmit">
					<input id="textinput" type="text" value="" data-bind="value: chatInput">
					<input id="submit" type="submit" value="Send">
				</form>
			</div>
		</div>
	</div>
	<script src="jquery-1.9.1.min.js"></script>
	<script src="knockout-2.2.1.js"></script>
	<script src="underscore.js"></script>
	<script>
		function getTime(){
			var date = new Date();
			var hours = date.getHours();
			if(hours < 10){
				hours = "0" + hours;
			}
			var minutes = date.getMinutes();
			if(minutes < 10){
				minutes = "0" + minutes;
			}
			var seconds = date.getSeconds();
			if(seconds < 10){
				seconds = "0" + seconds;
			}
			return (hours + ":" + minutes /*+ ":" + seconds*/);
		}

		function scroll(id, value){

		}

		var ChatMsg = function(name, msg){
			this.name = name;
			this.text = msg;
			this.timestamp = getTime();
		}

		var model = function(){
			this.chatLog = ko.observableArray([]);
			this.chatInput = ko.observable("");
			this.chatSubmit = function(){
				var msg = this.chatInput().trim();
				if(msg == ""){

				}
				else if(msg[0] == "/"){

				}
				else {
					this.chatLog.push(new ChatMsg("Testguy", msg));
					if(this.chatLog().length > 10){
						this.chatLog.shift();
					}
				}
				var divChatlog = document.getElementById("chatLog1");
				divChatlog.scrollTop = divChatlog.scrollHeight;
				this.chatInput("");
			};
			this.chatShow = ko.observable(true);
			this.chatHide = ko.computed(function(){
				return !this.chatShow();
			}, this);
			this.chatToggle = function(){
				this.chatShow(!this.chatShow());
			}
		}
		ko.applyBindings(new model());
	</script>
</body>
</html>